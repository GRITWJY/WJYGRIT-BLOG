<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>TCP原理解读 | WJYGRIT的笔记</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="icon" href="/wjy.jpeg">
    <meta name="description" content="每当你被漫天乌云压的喘不过气时，往往是一切问题解决的时候。而当你感觉晴空万里时，其实并没有你想得那样好">
    
    <link rel="preload" href="/assets/css/0.styles.3fe8fa80.css" as="style"><link rel="preload" href="/assets/js/app.a719edd7.js" as="script"><link rel="preload" href="/assets/js/2.8ae81035.js" as="script"><link rel="preload" href="/assets/js/3.a48ef124.js" as="script"><link rel="preload" href="/assets/js/12.2c2cab69.js" as="script"><link rel="prefetch" href="/assets/js/10.f6116aed.js"><link rel="prefetch" href="/assets/js/11.39b37055.js"><link rel="prefetch" href="/assets/js/13.40f6c45f.js"><link rel="prefetch" href="/assets/js/14.b90cbbdd.js"><link rel="prefetch" href="/assets/js/15.2fd24854.js"><link rel="prefetch" href="/assets/js/16.1c4ab254.js"><link rel="prefetch" href="/assets/js/17.b76a33c4.js"><link rel="prefetch" href="/assets/js/18.2c087f19.js"><link rel="prefetch" href="/assets/js/4.1afdb6cb.js"><link rel="prefetch" href="/assets/js/5.e22c6638.js"><link rel="prefetch" href="/assets/js/6.0d3c3371.js"><link rel="prefetch" href="/assets/js/7.2f9cf436.js"><link rel="prefetch" href="/assets/js/8.7438018c.js"><link rel="prefetch" href="/assets/js/9.c4ad51f6.js">
    <link rel="stylesheet" href="/assets/css/0.styles.3fe8fa80.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/wjy.jpeg" alt="WJYGRIT的笔记" class="logo"> <span class="site-name can-hide">WJYGRIT的笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/a61298/" class="nav-link">前端基础
</a></li><li class="dropdown-item"><!----> <a href="/pages/8143cc480faf9a11/" class="nav-link">前端技巧
</a></li><li class="dropdown-item"><h4>源码系列</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/source/vue/" class="nav-link">vue源码解析
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机" class="dropdown-title"><a href="/computed/" class="link-title">计算机</a> <span class="title" style="display:none;">计算机</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/aFADFAFA61298/" class="nav-link">计算机网络
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类
</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签
</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档
</a></li></ul></div></div></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://wjygrit.oss-cn-beijing.aliyuncs.com/wjy.jpeg"> <div class="blogger-info"><h3>WJYGRIT</h3> <span>专研前端技术的小白</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/a61298/" class="nav-link">前端基础
</a></li><li class="dropdown-item"><!----> <a href="/pages/8143cc480faf9a11/" class="nav-link">前端技巧
</a></li><li class="dropdown-item"><h4>源码系列</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/source/vue/" class="nav-link">vue源码解析
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机" class="dropdown-title"><a href="/computed/" class="link-title">计算机</a> <span class="title" style="display:none;">计算机</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/aFADFAFA61298/" class="nav-link">计算机网络
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类
</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签
</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档
</a></li></ul></div></div></nav> <ul class="sidbar-links" data-v-3671c63a><li data-v-3671c63a><section class="sidebar-group collapsable depth-0" data-v-3671c63a><p class="sidebar-heading open"><span>计算机网络</span> <span class="arrow down"></span></p> <ul class="sidbar-links sidebar-group-items" data-v-3671c63a><li data-v-3671c63a><a href="/pages/aFADFAFA61298/" class="sidebar-link" data-v-3671c63a>HTTP与HTTPS</a></li><li data-v-3671c63a><a href="/pages/aFADfdfasFAFA61298/" aria-current="page" class="active sidebar-link" data-v-3671c63a>TCP原理解读</a><ul class="sidebar-sub-headers" data-v-3671c63a data-v-3671c63a><li class="sidebar-sub-header level2" data-v-3671c63a data-v-3671c63a><a href="/pages/aFADfdfasFAFA61298/#_1、什么是tcp网络分层" class="sidebar-link" data-v-3671c63a>1、什么是TCP网络分层</a></li><li class="sidebar-sub-header level2" data-v-3671c63a data-v-3671c63a><a href="/pages/aFADfdfasFAFA61298/#_2、tcp的三次握手为什么是3次" class="sidebar-link" data-v-3671c63a>2、TCP的三次握手为什么是3次</a></li><li class="sidebar-sub-header level2" data-v-3671c63a data-v-3671c63a><a href="/pages/aFADfdfasFAFA61298/#_3、-四次挥手" class="sidebar-link" data-v-3671c63a>3、 四次挥手</a></li><li class="sidebar-sub-header level2" data-v-3671c63a data-v-3671c63a><a href="/pages/aFADfdfasFAFA61298/#_4、-为什么syn-fin-不包含数据却要消耗一个序列号" class="sidebar-link" data-v-3671c63a>4、 为什么SYN/FIN 不包含数据却要消耗一个序列号</a></li><li class="sidebar-sub-header level2" data-v-3671c63a data-v-3671c63a><a href="/pages/aFADfdfasFAFA61298/#_5、-什么是半连接队列-什么是syn-flood攻击" class="sidebar-link" data-v-3671c63a>5、 什么是半连接队列？什么是SYN Flood攻击？</a></li><li class="sidebar-sub-header level2" data-v-3671c63a data-v-3671c63a><a href="/pages/aFADfdfasFAFA61298/#_6、tcp快速打开-tfo-的原理" class="sidebar-link" data-v-3671c63a>6、TCP快速打开(TFO)的原理</a></li><li class="sidebar-sub-header level2" data-v-3671c63a data-v-3671c63a><a href="/pages/aFADfdfasFAFA61298/#tcp发送报文数据时-可能将多个数据包合并成一个大的数据包发送-就有可能发生粘包问题。以下可以用来解决这个问题的是" class="sidebar-link" data-v-3671c63a>tcp发送报文数据时，可能将多个数据包合并成一个大的数据包发送，就有可能发生粘包问题。以下可以用来解决这个问题的是？</a></li><li class="sidebar-sub-header level2" data-v-3671c63a data-v-3671c63a><a href="/pages/aFADfdfasFAFA61298/#进程从运行状态进入就绪状态的原因可能是" class="sidebar-link" data-v-3671c63a>进程从运行状态进入就绪状态的原因可能是</a></li><li class="sidebar-sub-header level2" data-v-3671c63a data-v-3671c63a><a href="/pages/aFADfdfasFAFA61298/#_7、tcp报文中的时间戳有什么作用" class="sidebar-link" data-v-3671c63a>7、TCP报文中的时间戳有什么作用？</a></li><li class="sidebar-sub-header level2" data-v-3671c63a data-v-3671c63a><a href="/pages/aFADfdfasFAFA61298/#_8、tcp的超时重传时间是如何计算的" class="sidebar-link" data-v-3671c63a>8、TCP的超时重传时间是如何计算的？</a></li><li class="sidebar-sub-header level2" data-v-3671c63a data-v-3671c63a><a href="/pages/aFADfdfasFAFA61298/#_9、tcp的流量控制" class="sidebar-link" data-v-3671c63a>9、TCP的流量控制？</a></li><li class="sidebar-sub-header level2" data-v-3671c63a data-v-3671c63a><a href="/pages/aFADfdfasFAFA61298/#_10、tcp的keep-alive的原理" class="sidebar-link" data-v-3671c63a>10、TCP的keep-alive的原理</a></li><li class="sidebar-sub-header level2" data-v-3671c63a data-v-3671c63a><a href="/pages/aFADfdfasFAFA61298/#_11、tcp当中的端口号" class="sidebar-link" data-v-3671c63a>11、TCP当中的端口号</a></li><li class="sidebar-sub-header level2" data-v-3671c63a data-v-3671c63a><a href="/pages/aFADfdfasFAFA61298/#_12、tcp场景问题1" class="sidebar-link" data-v-3671c63a>12、TCP场景问题1</a></li><li class="sidebar-sub-header level2" data-v-3671c63a data-v-3671c63a><a href="/pages/aFADfdfasFAFA61298/#_13、tcp场景问题2" class="sidebar-link" data-v-3671c63a>13、TCP场景问题2</a></li><li class="sidebar-sub-header level2" data-v-3671c63a data-v-3671c63a><a href="/pages/aFADfdfasFAFA61298/#_14、tcp场景问题3" class="sidebar-link" data-v-3671c63a>14、TCP场景问题3</a></li><li class="sidebar-sub-header level2" data-v-3671c63a data-v-3671c63a><a href="/pages/aFADfdfasFAFA61298/#_15、telnet使用" class="sidebar-link" data-v-3671c63a>15、telnet使用</a></li><li class="sidebar-sub-header level2" data-v-3671c63a data-v-3671c63a><a href="/pages/aFADfdfasFAFA61298/#_16、netstat的用法" class="sidebar-link" data-v-3671c63a>16、netstat的用法</a></li><li class="sidebar-sub-header level2" data-v-3671c63a data-v-3671c63a><a href="/pages/aFADfdfasFAFA61298/#_17、tcpdump用法" class="sidebar-link" data-v-3671c63a>17、tcpdump用法</a></li><li class="sidebar-sub-header level2" data-v-3671c63a data-v-3671c63a><a href="/pages/aFADfdfasFAFA61298/#_19、tcp和udp的区别" class="sidebar-link" data-v-3671c63a>19、TCP和UDP的区别</a></li><li class="sidebar-sub-header level2" data-v-3671c63a data-v-3671c63a><a href="/pages/aFADfdfasFAFA61298/#_20、设计qq" class="sidebar-link" data-v-3671c63a>20、设计QQ？</a></li></ul></li></ul></section></li></ul></aside> <div><main class="page"><div class="theme-vdoing-wrapper"><div class="articleInfo-wrap" data-v-b097574c><div class="articleInfo" data-v-b097574c><ul class="breadcrumbs" data-v-b097574c><li data-v-b097574c><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-b097574c></a></li> <li data-v-b097574c><a href="/computed/#计算机" data-v-b097574c>计算机
        </a></li><li data-v-b097574c><a href="/computed/#计算机网络" data-v-b097574c>计算机网络
        </a></li></ul> <div class="info" data-v-b097574c><div title="作者" class="author iconfont icon-touxiang" data-v-b097574c><a href="javascript:;" data-v-b097574c>WJYGRIT</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-b097574c><a href="javascript:;" data-v-b097574c>2022-05-09</a></div> <!----></div></div></div> <!----> <div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <div class="content-wrapper"><h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">TCP原理解读<!----></h1> <div class="theme-vdoing-content content__default"><h1 id="tcp"><a href="#tcp" class="header-anchor">#</a> TCP</h1> <h2 id="_1、什么是tcp网络分层"><a href="#_1、什么是tcp网络分层" class="header-anchor">#</a> 1、什么是TCP网络分层</h2> <blockquote><p>应用层(数据包)-&gt; 传输层(TCP头部，端口，序列号等) -&gt; 网络层(IP头部，IP地址) -&gt; 数据链路层(MAC地址)-&gt;物理层</p></blockquote> <img src="/img_36.png" alt="foo"> <img src="/img_37.png" alt="foo"> <h2 id="_2、tcp的三次握手为什么是3次"><a href="#_2、tcp的三次握手为什么是3次" class="header-anchor">#</a> 2、TCP的三次握手为什么是3次</h2> <img src="/img_38.png" alt="foo">
从最开始双方都处于CLOSED状态。然后服务端开始监听某个端口，进入了LISTEN状态。
<ul><li>1、然后客户端主动发起连接，发送 SYN , 自己变成了SYN-SENT状态</li> <li>2、服务端接收到，返回SYN和ACK(对应客户端发来的SYN)，自己变成了SYN-REVD。</li> <li>3、之后客户端再发送ACK给服务端，自己变成了ESTABLISHED状态；服务端收到ACK之后，也变成了ESTABLISHED状态。</li></ul> <p><strong>为什么不是两次</strong></p> <ul><li>因为无法确认客户端的接收能力</li></ul> <p><strong>为什么不是四次</strong></p> <ul><li>三次握手的目的是确认双方发送和接收的能力，三次足够</li></ul> <h2 id="_3、-四次挥手"><a href="#_3、-四次挥手" class="header-anchor">#</a> 3、 四次挥手</h2> <img src="/img_39.png" alt="foo">
刚开始双方处于ESTABLISHED状态
- 客户端要断开了，向服务器发送 FIN 报文，发送后客户端变成了FIN-WAIT-1状态。注意, 这时候客户端同时也变成了half-close(半关闭)状态，即无法向服务端发送报文，只能接收。
- 服务端接收后向客户端确认，变成了CLOSED-WAIT状态。
- 客户端接收到了服务端的确认，变成了FIN-WAIT2状态。
- 随后，服务端向客户端发送FIN，自己进入LAST-ACK状态，
- 客户端收到服务端发来的FIN后，自己变成了TIME-WAIT状态，然后发送 ACK 给服务端。
<p><strong>为什么是四次挥手而不是三次？</strong></p> <ul><li>因为服务端在接收到FIN, 往往不会立即返回FIN, 必须等到服务端所有的报文都发送完毕了，才能发FIN。因此先发一个ACK表示已经收到客户端的FIN，延迟一段时间才发FIN。这就造成了四次挥手。</li></ul> <p>如果是三次挥手会有什么问题？</p> <p>等于说服务端将ACK和FIN的发送合并为一次挥手，这个时候长时间的延迟可能会导致客户端误以为FIN没有到达客户端，从而让客户端不断的重发FIN。</p> <h2 id="_4、-为什么syn-fin-不包含数据却要消耗一个序列号"><a href="#_4、-为什么syn-fin-不包含数据却要消耗一个序列号" class="header-anchor">#</a> 4、 为什么SYN/FIN 不包含数据却要消耗一个序列号</h2> <blockquote><p>凡是需要对端确认的，一定消耗TCP报文的序列号。
<img src="/img_40.png" alt="foo"></p></blockquote> <h2 id="_5、-什么是半连接队列-什么是syn-flood攻击"><a href="#_5、-什么是半连接队列-什么是syn-flood攻击" class="header-anchor">#</a> 5、 什么是半连接队列？什么是SYN Flood攻击？</h2> <ul><li>半连接队列
<ul><li>当客户端发送SYN到服务端，服务端收到以后回复ACK和SYN，状态由LISTEN变为SYN_RCVD，此时这个连接就被推入了SYN队列，也就是半连接队列。</li></ul></li> <li>全连接队列
<ul><li>当客户端返回ACK, 服务端接收后，三次握手完成。这个时候连接等待被具体的应用取走，在被取走之前，它会被推入另外一个 TCP 维护的队列，也就是全连接队列(Accept Queue)。</li></ul></li></ul> <img src="/img_41.png" alt="foo"> <ul><li>如何应对 SYN Flood 攻击？
<ul><li>增加 SYN 连接，也就是增加半连接队列的容量。</li> <li>减少 SYN + ACK 重试次数，避免大量的超时重发。</li> <li>利用 SYN Cookie 技术，在服务端接收到SYN后不立即分配连接资源，而是根据这个SYN计算出一个Cookie，连同第二次握手回复给客户端，在客户端回复ACK的时候带上这个Cookie值，服务端验证 Cookie 合法之后才分配连接资源。</li></ul></li></ul> <h2 id="_6、tcp快速打开-tfo-的原理"><a href="#_6、tcp快速打开-tfo-的原理" class="header-anchor">#</a> 6、TCP快速打开(TFO)的原理</h2> <img src="/img_42.png" alt="foo"> <img src="/img_43.png" alt="foo"> <img src="/img_45.png" alt="foo"> <img src="/img_46.png" alt="foo"> <p><strong>后面的三次握手</strong></p> <ul><li>在后面的三次握手中，客户端会将之前缓存的 Cookie、SYN 和HTTP请求(是的，你没看错)发送给服务端，服务端验证了 Cookie 的合法性，如果不合法直接丢弃；如果是合法的，那么就正常返回SYN + ACK。</li> <li>重点来了，现在服务端能向客户端发 HTTP 响应了！这是最显著的改变，三次握手还没建立，仅仅验证了 Cookie 的合法性，就可以返回 HTTP 响应了。</li></ul> <p><strong>TFO 的优势</strong></p> <ul><li>TFO 的优势并不在与首轮三次握手，而在于后面的握手，在拿到客户端的 Cookie 并验证通过以后，可以直接返回 HTTP 响应，充分利用了1 个RTT(Round-Trip Time，往返时延)的时间提前进行数据传输，积累起来还是一个比较大的优势。</li></ul> <h2 id="tcp发送报文数据时-可能将多个数据包合并成一个大的数据包发送-就有可能发生粘包问题。以下可以用来解决这个问题的是"><a href="#tcp发送报文数据时-可能将多个数据包合并成一个大的数据包发送-就有可能发生粘包问题。以下可以用来解决这个问题的是" class="header-anchor">#</a> tcp发送报文数据时，可能将多个数据包合并成一个大的数据包发送，就有可能发生粘包问题。以下可以用来解决这个问题的是？</h2> <p>出现粘包，主要是tcp为了提高效率，每次都要等足够长的数据才进行发送，接收方要等到足够长的数据才从缓冲区提取。解决的办法就是只要能把包分开就不影响传输。</p> <ul><li>发送固定长度的消息</li> <li>包结尾增加分隔符</li> <li>把消息分成消息头和消息体，其中消息头上包含长度</li> <li>慢开始算法和利用滑动窗口实现控制都是网络数据传输时的流量控制，以避免拥塞的发生的算法</li></ul> <h2 id="进程从运行状态进入就绪状态的原因可能是"><a href="#进程从运行状态进入就绪状态的原因可能是" class="header-anchor">#</a> 进程从运行状态进入就绪状态的原因可能是</h2> <img src="/TCP/img.png" alt="foo"> <h2 id="_7、tcp报文中的时间戳有什么作用"><a href="#_7、tcp报文中的时间戳有什么作用" class="header-anchor">#</a> 7、TCP报文中的时间戳有什么作用？</h2> <img src="/TCP/img_2.png" alt="foo">
TCP TimeStamps Options由四部分构成：类别，长度，发送方时间戳，回显时间戳
<p><strong>解决两大问题</strong></p> <ul><li>计算往返时延RTT：ACK包括了TSval 和 TSecr，这样无论是正常确认包韩式重传确认包，都可以通过这两个值计算出RTT</li> <li>防止序列回绕：</li></ul> <img src="/TCP/img_3.png" alt="foo"> <img src="/TCP/img_4.png" alt="foo"> <h2 id="_8、tcp的超时重传时间是如何计算的"><a href="#_8、tcp的超时重传时间是如何计算的" class="header-anchor">#</a> 8、TCP的超时重传时间是如何计算的？</h2> <img src="/TCP/img_5.png" alt="foo"> <img src="/TCP/img_6.png" alt="foo"> <img src="/TCP/img_7.png" alt="foo"> <h2 id="_9、tcp的流量控制"><a href="#_9、tcp的流量控制" class="header-anchor">#</a> 9、TCP的流量控制？</h2> <img src="/TCP/img_8.png" alt="foo"> <img src="/TCP/img_9.png" alt="foo"> <h2 id="_10、tcp的keep-alive的原理"><a href="#_10、tcp的keep-alive的原理" class="header-anchor">#</a> 10、TCP的keep-alive的原理</h2> <img src="/TCP/img_10.png" alt="foo"> <h2 id="_11、tcp当中的端口号"><a href="#_11、tcp当中的端口号" class="header-anchor">#</a> 11、TCP当中的端口号</h2> <img src="/TCP/img_11.png" alt="foo"> <img src="/TCP/img_12.png" alt="foo"> <h2 id="_12、tcp场景问题1"><a href="#_12、tcp场景问题1" class="header-anchor">#</a> 12、TCP场景问题1</h2> <img src="/TCP/img_13.png" alt="foo">
500 + 300 + 200
<h2 id="_13、tcp场景问题2"><a href="#_13、tcp场景问题2" class="header-anchor">#</a> 13、TCP场景问题2</h2> <p>收到IP数据包解析以后，它怎么知道这个分组应该投递到上层的哪一个协议
<img src="/TCP/img_14.png" alt="foo"></p> <h2 id="_14、tcp场景问题3"><a href="#_14、tcp场景问题3" class="header-anchor">#</a> 14、TCP场景问题3</h2> <img src="/TCP/img_15.png" alt="foo"> <h2 id="_15、telnet使用"><a href="#_15、telnet使用" class="header-anchor">#</a> 15、telnet使用</h2> <img src="/TCP/img_16.png" alt="foo"> <h2 id="_16、netstat的用法"><a href="#_16、netstat的用法" class="header-anchor">#</a> 16、netstat的用法</h2> <img src="/TCP/img_17.png" alt="foo"> <h2 id="_17、tcpdump用法"><a href="#_17、tcpdump用法" class="header-anchor">#</a> 17、tcpdump用法</h2> <p>tcpdump则是一个命令行的网络流量分析工具，功能非常强大，一般我们用来抓TCP的包</p> <h2 id="_19、tcp和udp的区别"><a href="#_19、tcp和udp的区别" class="header-anchor">#</a> 19、TCP和UDP的区别</h2> <img src="/TCP/img_18.png" alt="foo"> <h2 id="_20、设计qq"><a href="#_20、设计qq" class="header-anchor">#</a> 20、设计QQ？</h2> <img src="/TCP/img_19.png" alt="foo"></div></div> <div class="page-edit"><div class="tags"><a href="/tags/?tag=TCP" title="标签">#TCP
    </a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">5/11/2022, 6:11:50 PM</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/aFADFAFA61298/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">HTTP与HTTPS</div></a> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/aFADFAFA61298/" class="prev">HTTP与HTTPS</a></span> <!----></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新
    </a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/aFADFAFA61298/"><div>
            HTTP与HTTPS
            <!----></div></a> <span class="date">2022-05-09</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/a61298/"><div>
            JS基础及小tip
            <!----></div></a> <span class="date">2022-05-01</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/8143cc480faf9a11/"><div>
            promise的封装
            <!----></div></a> <span class="date">2022-05-01</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:1435408225@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/GRITWJY" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://y.qq.com/n/ryqq/playlist/8486647157" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2022-2022
    <span>WJYGRIT | <a href="https://github.com/xugaoyi/vuepress-theme-vdoing/blob/master/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div></div></div><div class="global-ui"><div class="reco-bgm-panel" data-v-b1d3339e><audio id="bgm" src="https://wjygrit.oss-cn-beijing.aliyuncs.com/music/QQ%E9%9F%B3%E4%B9%90/1.mp3" data-v-b1d3339e></audio> <div class="reco-float-box" style="bottom:200px;z-index:999999;display:none;" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><img src="https://wjygrit.oss-cn-beijing.aliyuncs.com/music/QQ%E9%9F%B3%E4%B9%90/1.webp" data-v-b1d3339e></div> <div class="reco-bgm-box" style="left:10px;bottom:10px;z-index:999999;" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><div class="reco-bgm-cover" style="background-image:url(https://wjygrit.oss-cn-beijing.aliyuncs.com/music/QQ%E9%9F%B3%E4%B9%90/1.webp);" data-v-b1d3339e><div class="mini-operation" style="display:none;" data-v-b1d3339e><i class="reco-bgm reco-bgm-pause" style="display:none;" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-play" style="display:none;" data-v-b1d3339e></i></div> <div class="falut-message" style="display:none;" data-v-b1d3339e>
          播放失败
        </div></div> <div class="reco-bgm-info" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><div class="info-box" data-v-b1d3339e><i class="reco-bgm reco-bgm-music music" data-v-b1d3339e></i>千与千寻</div> <div class="info-box" data-v-b1d3339e><i class="reco-bgm reco-bgm-artist" data-v-b1d3339e></i>昼夜</div> <div class="reco-bgm-progress" data-v-b1d3339e><div class="progress-bar" data-v-b1d3339e><div class="bar" data-v-b1d3339e></div></div></div> <div class="reco-bgm-operation" data-v-b1d3339e><i class="reco-bgm reco-bgm-last last" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-pause pause" style="display:none;" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-play play" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-next next" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-volume1 volume" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-mute mute" style="display:none;" data-v-b1d3339e></i> <div class="volume-bar" data-v-b1d3339e><div class="bar" data-v-b1d3339e></div></div></div></div> <div class="reco-bgm-left-box" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><i class="reco-bgm reco-bgm-left" data-v-b1d3339e></i></div></div></div><canvas id="DLine" class="line-bg" data-v-52312e22 data-v-52312e22></canvas></div></div>
    <script src="/assets/js/app.a719edd7.js" defer></script><script src="/assets/js/2.8ae81035.js" defer></script><script src="/assets/js/3.a48ef124.js" defer></script><script src="/assets/js/12.2c2cab69.js" defer></script>
  </body>
</html>
