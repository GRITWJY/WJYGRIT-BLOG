---
title: å‰ç«¯åŸºç¡€å·©å›º5  
date: 2022-07-16 22:39:34  
permalink: /pages/SMEOME/  
categories:
    - å‰ç«¯
    - å‰ç«¯åŸºç¡€æ¦‚å¿µ
tags:
    - åŸºç¡€
    - é¢è¯•
author:  
    name: WJYGRIT   
    link: https://github.com/GRITWJY  
---

# å‰ç«¯åŸºç¡€å·©å›º5

[[toc]]


## 1. CSSç›’å­æ¨¡å‹
:::details

CSSç›’æ¨¡å‹å®šä¹‰äº†ç›’çš„æ¯ä¸ªéƒ¨åˆ†åŒ…å« `margin, border, padding, content` ã€‚

æ ¹æ®ç›’å­å¤§å°çš„è®¡ç®—æ–¹å¼ä¸åŒç›’æ¨¡å‹åˆ†æˆäº†ä¸¤ç§ï¼Œæ ‡å‡†ç›’æ¨¡å‹å’Œæ€ªå¼‚ç›’æ¨¡å‹ã€‚ 

- **(W3C)æ ‡å‡†æ¨¡å‹**ï¼Œç»™ç›’è®¾ç½® `width` å’Œ `height`ï¼Œå®é™…è®¾ç½®çš„æ˜¯ content boxã€‚`padding` å’Œ `border `å†åŠ ä¸Šè®¾ç½®çš„å®½é«˜ä¸€èµ·å†³å®šæ•´ä¸ªç›’å­çš„å¤§å°ã€‚
  
- **æ€ªå¼‚ç›’æ¨¡å‹(IEç›’æ¨¡å‹)**ï¼Œç»™ç›’è®¾ç½® `width` å’Œ `height`ï¼ŒåŒ…å«äº†`padding`å’Œ`border `ï¼Œè®¾ç½®çš„ `width` å’Œ `height`å°±æ˜¯ç›’å­å®é™…çš„å¤§å°
  
é»˜è®¤æƒ…å†µä¸‹ï¼Œç›’æ¨¡å‹éƒ½æ˜¯æ ‡å‡†ç›’æ¨¡å‹ è®¾ç½®æ ‡å‡†ç›’æ¨¡å‹ï¼š`box-sizing:content-box` è®¾ç½®æ€ªå¼‚ç›’æ¨¡å‹ï¼š`box-sizing:border-box`
:::

## 2. margin è´Ÿå€¼é—®é¢˜
:::details

- `margin-top` å…ƒç´ è‡ªèº«ä¼šå‘ä¸Šç§»åŠ¨ï¼ŒåŒæ—¶ä¼šå½±å“ä¸‹æ–¹çš„å…ƒç´ ä¼šå‘ä¸Šç§»åŠ¨ï¼›
- `margin-botom` å…ƒç´ è‡ªèº«ä¸ä¼šä½ç§»ï¼Œä½†æ˜¯ä¼šå‡å°‘è‡ªèº«ä¾›cssè¯»å–çš„é«˜åº¦ï¼Œä»è€Œå½±å“ä¸‹æ–¹çš„å…ƒç´ ä¼šå‘ä¸Šç§»åŠ¨ã€‚
- `margin-left` å…ƒç´ è‡ªèº«ä¼šå‘å·¦ç§»åŠ¨ï¼ŒåŒæ—¶ä¼šå½±å“å…¶å®ƒå…ƒç´ ï¼›
- `margin-right` å…ƒç´ è‡ªèº«ä¸ä¼šä½ç§»ï¼Œä½†æ˜¯ä¼šå‡å°‘è‡ªèº«ä¾›cssè¯»å–çš„å®½åº¦ï¼Œä»è€Œå½±å“å³ä¾§çš„å…ƒç´ ä¼šå‘å·¦ç§»åŠ¨ï¼›
:::

## 3. ç½‘ç«™é¡µé¢åŠ è½½é¡ºåº 

- `https://juejin.cn/post/6844903764181123079`

## 4. cssæ ·å¼å†²çªæ€ä¹ˆè§£å†³ 
:::details
- 1. ç»†åŒ–é€‰æ‹©ç¬¦ 
     
é€šè¿‡ä½¿ç”¨ç»„åˆå™¨ï¼ˆCombinatorï¼‰å°†é€‰æ‹©å™¨çš„æè¿°å†™å¾—æ›´åŠ ç²¾ç¡®

- 2. æ”¹å˜CSSæ ·å¼è¡¨ä¸­çš„é¡ºåº
    
- 3. ä¸»åŠ¨æå‡ä¼˜å…ˆçº§
    
- 4. scoped
    
:::


## 5. setTimeoutä¸ºä»€ä¹ˆä¼šå­˜åœ¨å»¶è¿Ÿï¼Ÿæ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜ï¼Ÿ

:::details
setTimeoutç¬¬äºŒä¸ªå‚æ•°å»¶è¿Ÿæ—¶é—´å¹¶ä¸æ˜¯æµè§ˆå™¨æ¸²æŸ“å®Œæ¯•åå¤šå°‘ç§’æ‰§è¡Œç¬¬ä¸€ä¸ªå‚æ•°å›è°ƒï¼Œè€Œæ˜¯å¤šå°‘æ—¶é—´ä¹‹åå°†å›è°ƒæ”¾å…¥æ‰§è¡Œæ ˆã€‚åªè¦setTimeoutå½¢æˆçš„åµŒå¥—è¶³å¤Ÿå¤šï¼Œè¿™æ ·å®šæ—¶å™¨çº¿ç¨‹æ¥ä¸åŠå¤„ç†ï¼Œæ‰§è¡Œæ ˆå°±è¶³å¤Ÿæ·±ï¼Œå°±ä¼šå¯¼è‡´ä¸€å®šçš„å»¶è¿Ÿï¼Œå»¶è¿Ÿæœ€ç»ˆä¼šç¨³å®šåœ¨4mså·¦å³ã€‚

**postMessage**
```javascript
  (function () {
  var timeouts = [];
  var messageName = 'å‘é€ç»™è‡ªå·±ä»»ä½•æ¶ˆæ¯,å¯ä»¥ä¸ºç©º';
  function setZeroTimeout(fn) {
    timeouts.push(fn);
    window.postMessage(messageName, '*'); //å‘é€
  }
  function handleMessage(event) {
      event.stopPropagation();
      if (timeouts.length > 0) {
        var fn = timeouts.shift();
        fn();
      }
  }
  window.addEventListener('message', handleMessage, true);//ç›‘å¬å‘é€çš„æ¶ˆæ¯ï¼Œæ‰§è¡ŒhandleMessage
  window.setZeroTimeout = setZeroTimeout;
})();
```
:::
## 6. line-heigthè®¾ç½®ä¸º50%æ˜¯ä»£è¡¨ä»€ä¹ˆï¼Ÿ
:::details
**em**,1em ç›¸å½“äºå½“å‰å…ƒç´ è®¾ç½®çš„ font-size çš„å¤§å°ï¼Œè€Œ 1.5em ç›¸å½“äºå½“å‰å…ƒç´ çš„å­—ä½“å¤§å°çš„1.5å€ã€‚

**ç™¾åˆ†æ¯”**, å‚è€ƒçˆ¶å…ƒç´ çš„å­—ä½“å¤§å°è¿›è¡Œè®¾ç½®, ç»§æ‰¿çˆ¶å…ƒç´ çš„è¡Œé«˜ï¼Œæ— æ³•è‡ªå·±é€‚åº”å½“å‰å…ƒç´ ã€‚

**æ— å•ä½æ•°å­—**, æ— å•ä½æ•°å­—é¡¾åæ€ä¹‰ï¼Œå¯ä»¥ä¸ç”¨è®¾ç½®å•ä½ï¼Œä½ å¯ä»¥ç†è§£ä¸ºå½“å‰å…ƒç´  font-size çš„å€æ•°ï¼Œè¿™ç§å½¢å¼å¯ä»¥è®©å…ƒç´ é€‚åº”è‡ªå·±çš„ font-size å¤§å°æ¥åšè¡Œé«˜ã€‚

**normal**, è€Œå®ƒçš„å¤§å°å–å†³äºå½“å‰çš„æµè§ˆå™¨å†…ç½®çš„é»˜è®¤å€¼çš„å¤šå°‘ã€‚è€Œé»˜è®¤å€¼ç»å¤§å¤šæ•°æƒ…å†µæ˜¯ä¸€ä¸ªæ— å•ä½æ•°å­—ï¼Œæ‰€ä»¥å¹¶ä¸ä¼šç»§æ‰¿çˆ¶å…ƒç´ çš„ line-height ,è€Œæ˜¯æ ¹æ®è‡ªå·±å½“å‰çš„ font-size è‡ªåŠ¨è¿›è¡Œè°ƒæ•´ã€‚
:::

## 7. [Webå®‰å…¨ï¼šXSSæ”»å‡»å’ŒCSRFæ”»å‡»ä»¥åŠå…¶é˜²å¾¡æ–¹å¼](https://www.wjygrit.cn/pages/SAFEKD/#%E5%A6%82%E4%BD%95%E9%98%B2%E5%BE%A1-xss-%E6%94%BB%E5%87%BB)


## 8. [å‰ç«¯æƒé™](https://www.wjygrit.cn/pages/KEOMXW/#store-%E7%BB%84%E7%BB%87%E7%BB%93%E6%9E%84)

## 9. [HTTP/2.0æœ‰å“ªäº›æ–°ç‰¹æ€§ï¼Ÿ](https://juejin.cn/post/6844903734670000142)


## 10. ä»€ä¹ˆæ˜¯å¤–è¾¹è·å¡Œé™·ï¼Ÿå¦‚ä½•è§£å†³ï¼Ÿ
:::details
> å—çš„ä¸Šå¤–è¾¹è·(margin-top)å’Œä¸‹å¤–è¾¹è·(margin-bottom)æœ‰æ—¶åˆå¹¶(æŠ˜å )ä¸ºå•ä¸ªè¾¹è·ï¼Œå…¶å¤§å°ä¸ºå•ä¸ªè¾¹è·çš„æœ€å¤§å€¼(æˆ–å¦‚æœå®ƒä»¬ç›¸ç­‰ï¼Œåˆ™ä»…ä¸ºå…¶ä¸­ä¸€ä¸ª)ï¼Œè¿™ç§è¡Œä¸ºç§°ä¸ºå¤–è¾¹è·æŠ˜å ã€‚

**ä»€ä¹ˆæ—¶å€™å‘ç”Ÿå¤–è¾¹è·æŠ˜å ?**
- 1. åŒä¸€å±‚çº§çš„ä¸¤ä¸ªç›¸é‚»å…ƒç´ 
  æ™®é€šçš„ä¸¤ä¸ªç›¸é‚»å—çº§å…ƒç´ ï¼Œå¯ä»¥å‘ç”Ÿå¤–è¾¹è·æŠ˜å ã€‚åä¸€ä¸ªå…ƒç´ æ²¡ä½¿ç”¨clear æ¸…é™¤æµ®åŠ¨ã€‚

- 2. ç›´æ¥ç›¸é‚»çš„çˆ¶å­å…ƒç´ 
  
> å¦‚æœæ²¡æœ‰è¾¹æ¡†borderï¼Œå†…è¾¹è·paddingï¼Œè¡Œå†…å†…å®¹ï¼Œä¹Ÿæ²¡æœ‰åˆ›å»ºå—çº§æ ¼å¼ä¸Šä¸‹æ–‡æˆ–æ¸…é™¤æµ®åŠ¨æ¥åˆ†å¼€ä¸€ä¸ªå—çº§å…ƒç´ çš„ä¸Šè¾¹ç•Œmargin-top ä¸å…¶å†…ä¸€ä¸ªæˆ–å¤šä¸ªåä»£å—çº§å…ƒç´ çš„ä¸Šè¾¹ç•Œmargin-topï¼›æˆ–æ²¡æœ‰è¾¹æ¡†ï¼Œå†…è¾¹è·ï¼Œè¡Œå†…å†…å®¹ï¼Œé«˜åº¦heightï¼Œæœ€å°é«˜åº¦min-heightæˆ– æœ€å¤§é«˜åº¦max-height æ¥åˆ†å¼€ä¸€ä¸ªå—çº§å…ƒç´ çš„ä¸‹è¾¹ç•Œmargin-bottomä¸å…¶å†…çš„ä¸€ä¸ªæˆ–å¤šä¸ªåä»£åä»£å—å…ƒç´ çš„ä¸‹è¾¹ç•Œmargin-bottomï¼Œåˆ™å°±ä¼šå‡ºç°çˆ¶å—å…ƒç´ å’Œå…¶å†…åä»£å—å…ƒç´ å¤–è¾¹ç•Œé‡å ï¼Œé‡å éƒ¨åˆ†æœ€ç»ˆä¼šæº¢å‡ºåˆ°çˆ¶çº§å—å…ƒç´ å¤–é¢ã€‚
> 

```html
<div class="parent-box">
    <div>å­å…ƒç´ div</div>
</div>

<style>
  body{
    margin: 0;
  }
  .parent-box {
    background: #1e87f0;
    margin-top: 40px;
  }

  .parent-box > div {
    margin-top: 70px;
    background: #42b983;
  }
</style>

```



- 3. ç©ºçš„å—çº§å…ƒç´ 

> å½“ä¸€ä¸ªå—å…ƒç´ ä¸Šè¾¹ç•Œmargin-top ç›´æ¥è´´åˆ°å…ƒç´ ä¸‹è¾¹ç•Œmargin-bottomæ—¶ä¹Ÿä¼šå‘ç”Ÿè¾¹ç•ŒæŠ˜å ã€‚è¿™ç§æƒ…å†µä¼šå‘ç”Ÿåœ¨ä¸€ä¸ªå—å…ƒç´ å®Œå…¨æ²¡æœ‰è®¾å®šè¾¹æ¡†borderã€å†…è¾¹è·paddingã€é«˜åº¦heightã€æœ€å°é«˜åº¦min-height ã€æœ€å¤§é«˜åº¦max-height ã€å†…å®¹è®¾å®šä¸ºinlineæˆ–æ˜¯åŠ ä¸Šclear-fixçš„æ—¶å€™ã€‚


å¦‚ä¸‹æ‰€ç¤ºï¼Œæ˜¯ä¸€ä¸ªç©ºå…ƒç´ å‘ç”Ÿå¤–è¾¹è·æŠ˜å çš„ç¤ºä¾‹ï¼ŒåŸæœ¬ä½äºç¬¬äºŒè¡Œçš„ç©ºå…ƒç´ è®¾ç½®äº†è·ç¦»ä¸Šè¾¹å…ƒç´ 100pxï¼Œè·ç¦»ä¸‹è¾¹å…ƒç´ 150pxï¼Œå¦‚æœä¸å‘ç”ŸæŠ˜å ï¼Œç¬¬ä¸€è¡Œå’Œç¬¬ä¸‰è¡Œå…ƒç´ åº”è¯¥æ˜¯è·ç¦» 100 + 0ï¼ˆç¬¬äºŒè¡Œå…ƒç´ ä¸ºç©ºé«˜åº¦ä¸º0ï¼‰+ 150=200pxï¼Œç„¶è€Œå®é™…ä¸Šæ˜¯150pxã€‚è¿™å°±æ˜¯è¯´è¿™ä¸ªç©ºå…ƒç´ è‡ªèº«çš„margin å‘ç”Ÿäº†æŠ˜å ï¼Œåªå–äº†å¤§çš„å€¼150pxï¼Œå¦å¤–çš„100pxè¢«æŠ˜å ä¸”æº¢å‡ºåˆ°äº†ç¬¬ä¸‰è¡Œå…ƒç´ ã€‚


```html
<style>
  div:nth-child(2) {
    background: #f01e4f;
    margin-bottom: 150px;
    margin-top: 100px;
  }
</style>


<div style="background: #42b983">ç¬¬ä¸€è¡Œå…ƒç´ </div>
<div></div>
<div style="background: #1e87f0">ç¬¬ä¸‰è¡Œå…ƒç´ </div>
```

**ä¸ä¼šå‘ç”Ÿå¤–è¾¹è·æŠ˜å çš„æ¡ä»¶**
- â‘ è¡Œå†…å—å…ƒç´  inline-block ä¸ä¼šå‘ç”Ÿå¤–è¾¹è·æŠ˜å ï¼ŒåŒ…æ‹¬åŒå±‚çº§å’ŒåµŒå¥—å…ƒç´ ã€‚
- â‘¡æµ®åŠ¨ float å…ƒç´ ä¸ä¼šå‘ç”Ÿå¤–è¾¹è·æŠ˜å ï¼ŒåŒ…æ‹¬åŒå±‚çº§å’ŒåµŒå¥—å…ƒç´ ã€‚
- â‘¢ç»å¯¹å®šä½å…ƒç´  absolute ä¸ä¼šå‘ç”Ÿå¤–è¾¹è·æŠ˜å ï¼ŒåŒ…æ‹¬åŒå±‚çº§å’ŒåµŒå¥—å…ƒç´ ã€‚
- â‘£åˆ›å»ºäº† BFC çš„å…ƒç´ ä¸ä¼šå’Œå®ƒçš„å­å…ƒç´ å‘ç”Ÿå¤–è¾¹è·æŠ˜å ã€‚
:::


## 11. åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œç»„ä»¶é€šä¿¡æœ‰å“ªäº›æ³¨æ„ç‚¹ï¼Ÿ
:::details
- 1. çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®æ—¶ç±»ä¼¼åœ¨æ ‡ç­¾ä¸­å†™äº†ä¸€ä¸ªå±æ€§ï¼Œå¦‚æœæ˜¯ä¼ é€’çš„æ•°æ®æ˜¯dataä¸­çš„è‡ªç„¶æ˜¯è¦åœ¨ä¼ é€’å±æ€§å‰åŠ v-bind:ï¼Œå¦‚æœä¼ é€’çš„æ˜¯ä¸€ä¸ªå·²çŸ¥çš„å›ºå®šå€¼å‘¢
  - å­—ç¬¦ä¸²æ˜¯é™æ€çš„å¯ç›´æ¥ä¼ å…¥æ— éœ€åœ¨å±æ€§å‰åŠ v-bind
  - æ•°å­—ï¼Œå¸ƒå°”ï¼Œå¯¹è±¡ï¼Œæ•°ç»„ï¼Œå› ä¸ºè¿™äº›æ˜¯jsè¡¨è¾¾å¼è€Œä¸æ˜¯å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥å³ä½¿è¿™äº›ä¼ é€’çš„æ˜¯é™æ€çš„ä¹Ÿéœ€è¦åŠ v-bindï¼ŒæŠŠæ•°æ®æ”¾åˆ°dataä¸­å¼•ç”¨
  
- 2. å¦‚æœpropä¼ åˆ°å­ç»„ä»¶ä¸­çš„æ•°æ®æ˜¯ä¸€ä¸ªå¯¹è±¡çš„è¯ï¼Œè¦æ³¨æ„ä¼ é€’çš„æ˜¯ä¸€ä¸ªå¯¹è±¡å¼•ç”¨ï¼Œè™½ç„¶çˆ¶å­ç»„ä»¶çœ‹ä¼¼æ˜¯åˆ†ç¦»çš„ä½†æœ€åéƒ½æ˜¯åœ¨åŒä¸€å¯¹è±¡ä¸‹
  - å¦‚æœpropä¼ åˆ°å­ç»„ä»¶çš„å€¼åªæ˜¯ä½œä¸ºåˆå§‹å€¼ä½¿ç”¨ï¼Œä¸”åœ¨çˆ¶ç»„ä»¶ä¸­ä¸ä¼šå˜åŒ–èµ‹å€¼åˆ°dataä¸­ä½¿ç”¨
  - å¦‚æœä¼ åˆ°å­ç»„ä»¶çš„propçš„æ•°æ®åœ¨çˆ¶ç»„ä»¶ä¼šè¢«æ”¹å˜çš„ï¼Œæ”¾åˆ°è®¡ç®—å±æ€§ä¸­ç›‘å¬å˜åŒ–ä½¿ç”¨ã€‚å› ä¸ºå¦‚æœä¼ é€’çš„æ˜¯ä¸ªå¯¹è±¡çš„è¯ï¼Œåªæ”¹å˜ä¸‹é¢çš„æŸä¸ªå±æ€§å­ç»„ä»¶ä¸­æ˜¯ä¸ä¼šå“åº”å¼æ›´æ–°çš„ï¼Œå¦‚æœå­ç»„ä»¶éœ€è¦åœ¨æ•°æ®å˜åŒ–æ—¶å“åº”å¼æ›´æ–°é‚£åªèƒ½æ”¾åˆ°computedä¸­æˆ–è€…ç”¨watchæ·±æ‹·è´deep:trueæ‰èƒ½ç›‘å¬åˆ°å˜åŒ–
  - å¦‚æœä½ ä¼ è¿›æ¥çš„æ˜¯ä¸ªå¯¹è±¡ï¼ŒåŒæ—¶ä½ åˆéœ€è¦åœ¨å­ç»„ä»¶ä¸­æ“ä½œä¼ è¿›æ¥çš„è¿™ä¸ªæ•°æ®ï¼Œé‚£ä¹ˆåœ¨çˆ¶ç»„ä»¶ä¸­çš„è¿™ä¸ªæ•°æ®ä¹Ÿä¼šæ”¹å˜ï¼Œå› ä¸ºä½ ä¼ é€’çš„åªæ˜¯ä¸ªå¼•ç”¨ï¼Œ å³ä½¿ä½ æŠŠpropçš„æ•°æ®å¤åˆ¶åˆ°dataä¸­ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œæ— è®ºå¦‚ä½•èµ‹å€¼éƒ½æ˜¯å¼•ç”¨çš„èµ‹å€¼ï¼Œä½ åªèƒ½å¯¹å¯¹è±¡åšæ·±æ‹·è´åˆ›å»ºä¸€ä¸ªå‰¯æœ¬æ‰èƒ½ç»§ç»­æ“ä½œï¼Œä½ å¯ä»¥ç”¨JSONçš„æ–¹æ³•å…ˆè½¬åŒ–å­—ç¬¦ä¸²åœ¨è½¬æˆå¯¹è±¡æ›´æ–¹ä¾¿ä¸€ç‚¹ï¼Œ
  - æ‰€ä»¥åœ¨çˆ¶å­ä¼ é€’æ•°æ®æ—¶è¦å…ˆè€ƒè™‘å¥½æ•°æ®è¦å¦‚ä½•ä½¿ç”¨ï¼Œå¦åˆ™ä½ ä¼šé‡åˆ°å¾ˆå¤šé—®é¢˜æˆ–å­ç»„ä»¶ä¸­ä¿®æ”¹äº†çˆ¶ç»„ä»¶ä¸­çš„æ•°æ®ï¼Œè¿™æ˜¯å¾ˆéšè”½å¹¶ä¸”å¾ˆå±é™©çš„
:::




## 12. æœ‰å“ªäº›è·¨é¡µé¢é€šä¿¡æ–¹æ³•ï¼Ÿ
:::details
### [BroadCast Channel](https://developer.mozilla.org/en-US/docs/Web/API/BroadcastChannel)å¯ä»¥å¸®æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç”¨äºå¹¿æ’­çš„é€šä¿¡é¢‘é“ã€‚å½“æ‰€æœ‰é¡µé¢éƒ½ç›‘å¬åŒä¸€é¢‘é“çš„æ¶ˆæ¯æ—¶ï¼Œå…¶ä¸­æŸä¸€ä¸ªé¡µé¢é€šè¿‡å®ƒå‘é€çš„æ¶ˆæ¯å°±ä¼šè¢«å…¶ä»–æ‰€æœ‰é¡µé¢æ”¶åˆ°ã€‚

```javascript

const bc = new BroadcastChannel('alienzhou');

bc.onmessage = function(e) {
    console.log('receive:', e.data);
};

// ç›‘å¬é”™è¯¯
bc.onmessageerror = function(e) {
    console.warn('error:', e);
};

// å‘é€æ¶ˆæ¯
bc.postMessage('hello')

// å…³é—­
bc.close()
```

- ç›‘å¬æ¶ˆæ¯é™¤äº† .onmessage è¿™ç§æ–¹å¼ï¼Œè¿˜å¯ä»¥ ä½¿ç”¨addEventListeneræ¥æ·»åŠ 'message'ç›‘å¬ï¼Œ
- å…³é—­é™¤äº†ä½¿ç”¨ Broadcast Channel å®ä¾‹ä¸ºæˆ‘ä»¬æä¾›çš„ close æ–¹æ³•æ¥å…³é—­ Broadcast Channelã€‚æˆ‘ä»¬è¿˜å¯å–æ¶ˆæˆ–è€…ä¿®æ”¹ç›¸åº”çš„'message'äº‹ä»¶ç›‘å¬ã€‚ä¸¤è€…æ˜¯æœ‰åŒºåˆ«çš„ï¼šå–æ¶ˆ'message'ç›‘å¬åªæ˜¯è®©é¡µé¢ä¸å¯¹å¹¿æ’­æ¶ˆæ¯è¿›è¡Œå“åº”ï¼ŒBroadcast Channel ä»ç„¶å­˜åœ¨ï¼›è€Œè°ƒç”¨ close æ–¹æ³•ä¼šåˆ‡æ–­ä¸ Broadcast Channel çš„è¿æ¥ï¼Œæµè§ˆå™¨æ‰èƒ½å¤Ÿå°è¯•å›æ”¶è¯¥å¯¹è±¡ï¼Œå› ä¸ºæ­¤æ—¶æµè§ˆå™¨æ‰ä¼šçŸ¥é“ç”¨æˆ·å·²ç»ä¸éœ€è¦ä½¿ç”¨å¹¿æ’­é¢‘é“äº†ã€‚
- å…¼å®¹æ€§ï¼šå¦‚æœä¸ä½¿ç”¨ IE å’Œ sf on iOS æµè§ˆå™¨ï¼Œå…¼å®¹æ€§è¿˜æ˜¯å¯ä»¥çš„ã€‚



### [Service Worker](https://developer.mozilla.org/zh-CN/docs/Web/API/Service_Worker_API) æ˜¯ä¸€ä¸ªå¯ä»¥é•¿æœŸè¿è¡Œåœ¨åå°çš„ Workerï¼Œèƒ½å¤Ÿå®ç°ä¸é¡µé¢çš„åŒå‘é€šä¿¡ã€‚å¤šé¡µé¢å…±äº«é—´çš„ Service Worker å¯ä»¥å…±äº«ï¼Œå°† Service Worker ä½œä¸ºæ¶ˆæ¯çš„å¤„ç†ä¸­å¿ƒï¼ˆä¸­å¤®ç«™ï¼‰å³å¯å®ç°å¹¿æ’­æ•ˆæœã€‚
```
<div id="app"></div>
<button id="tab">æ–°å¼€ Tab</button>
<button id="l-btn">å‘é€æ¶ˆæ¯</button>
<script>
    /* åˆ¤æ–­å½“å‰æµè§ˆå™¨æ˜¯å¦æ”¯æŒserviceWorker */
    if ('serviceWorker' in navigator) {
    /* å½“é¡µé¢åŠ è½½å®Œæˆå°±åˆ›å»ºä¸€ä¸ªserviceWorker */
    window.addEventListener('load', function () {
        /* åˆ›å»ºå¹¶æŒ‡å®šå¯¹åº”çš„æ‰§è¡Œå†…å®¹ */
        /* scope å‚æ•°æ˜¯å¯é€‰çš„ï¼Œå¯ä»¥ç”¨æ¥æŒ‡å®šä½ æƒ³è®© service worker æ§åˆ¶çš„å†…å®¹çš„å­ç›®å½•ã€‚åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œæˆ‘ä»¬æŒ‡å®šäº† '/'ï¼Œè¡¨ç¤º æ ¹ç½‘åŸŸä¸‹çš„æ‰€æœ‰å†…å®¹ã€‚è¿™ä¹Ÿæ˜¯é»˜è®¤å€¼ã€‚*/
        navigator.serviceWorker.register('./serviceWorker.js', { scope: './' })
            .then(function (registration) {
                console.log('ServiceWorker registration successful with scope: ', registration.scope);
            })
            .catch(function (err) {
                console.log('ServiceWorker registration failed: ', err);
            });
    });

    // ç›‘å¬æ¶ˆæ¯
    navigator.serviceWorker.addEventListener('message', function (e) {
    const data = e.data;
    console.log('æˆ‘æ¥å—åˆ°æ¶ˆæ¯äº†ï¼š', data);
});

    document.getElementById('l-btn').onclick = function () {
    navigator.serviceWorker.controller && navigator.serviceWorker.controller.postMessage('æµ‹è¯•ï¼Œä¼ é€æ¶ˆæ¯ï¼Œæˆ‘å‘é€æ¶ˆæ¯å•¦ã€‚ã€‚ã€‚');
};
}
</script>
å¤åˆ¶ä»£ç 
/* ç›‘å¬å®‰è£…äº‹ä»¶ï¼Œinstall äº‹ä»¶ä¸€èˆ¬æ˜¯è¢«ç”¨æ¥è®¾ç½®ä½ çš„æµè§ˆå™¨çš„ç¦»çº¿ç¼“å­˜é€»è¾‘ */
this.addEventListener('install', function (event) {
    /* é€šè¿‡è¿™ä¸ªæ–¹æ³•å¯ä»¥é˜²æ­¢ç¼“å­˜æœªå®Œæˆï¼Œå°±å…³é—­serviceWorker */
    event.waitUntil(
        /* åˆ›å»ºä¸€ä¸ªåå«V1çš„ç¼“å­˜ç‰ˆæœ¬ */
        caches.open('v1').then(function (cache) {
            /* æŒ‡å®šè¦ç¼“å­˜çš„å†…å®¹ï¼Œåœ°å€ä¸ºç›¸å¯¹äºè·ŸåŸŸåçš„è®¿é—®è·¯å¾„ */
            return cache.addAll(['./index.html']);
        })
    );
});

/* æ³¨å†Œfetchäº‹ä»¶ï¼Œæ‹¦æˆªå…¨ç«™çš„è¯·æ±‚ */
this.addEventListener('fetch', function (event) {
    event.respondWith(
        // magic goes here

        /* åœ¨ç¼“å­˜ä¸­åŒ¹é…å¯¹åº”è¯·æ±‚èµ„æºç›´æ¥è¿”å› */
        caches.match(event.request)
    );
});

/* ç›‘å¬æ¶ˆæ¯ï¼Œé€šçŸ¥å…¶ä»– Tab é¡µé¢ */
this.addEventListener('message', function(event) {
    this.clients.matchAll().then(function(clients) {
        clients.forEach(function(client) {
            // è¿™é‡Œçš„åˆ¤æ–­ç›®çš„æ˜¯è¿‡æ»¤æ‰å½“å‰ Tab é¡µé¢ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ visibilityState çš„çŠ¶æ€æ¥åˆ¤æ–­
            if(!client.focused) {
                client.postMessage(event.data)
            }
        })
    })
})

```

- Service workers æœ¬è´¨ä¸Šå……å½“ Web åº”ç”¨ç¨‹åºã€æµè§ˆå™¨ä¸ç½‘ç»œï¼ˆå¯ç”¨æ—¶ï¼‰ä¹‹é—´çš„ä»£ç†æœåŠ¡å™¨ã€‚æ‰€ä»¥æœ¬è´¨ä¸Šæ¥è¯´ Service Worker å¹¶ä¸è‡ªåŠ¨å…·å¤‡â€œå¹¿æ’­é€šä¿¡â€çš„åŠŸèƒ½ï¼Œéœ€è¦æ”¹é€  Service Worker æ·»åŠ äº›ä»£ç ï¼Œå°†å…¶æ”¹é€ æˆæ¶ˆæ¯ä¸­è½¬ç«™ã€‚åœ¨ Service Worker ä¸­ç›‘å¬äº†messageäº‹ä»¶ï¼Œè·å–é¡µé¢å‘é€çš„ä¿¡æ¯ã€‚ç„¶åé€šè¿‡ self.clients.matchAll() è·å–å½“å‰æ³¨å†Œäº† Service Worker çš„æ‰€æœ‰é¡µé¢ï¼Œé€šè¿‡è°ƒç”¨æ¯ä¸ªçš„ postMessage æ–¹æ³•ï¼Œå‘é¡µé¢å‘é€æ¶ˆæ¯ã€‚è¿™æ ·å°±æŠŠä»ä¸€å¤„ï¼ˆæŸä¸ªTabé¡µé¢ï¼‰æ”¶åˆ°çš„æ¶ˆæ¯é€šçŸ¥ç»™äº†å…¶ä»–é¡µé¢ã€‚
- å…¼å®¹æ€§ï¼šIE å…¨å†›è¦†æ²¡ï¼Œå…¶ä»–æµè§ˆå™¨è¿˜è¡Œï¼Œæ•´ä½“æ¥è¯´ä¸€èˆ¬ã€‚


###  `LocalStorage` å’Œ `storageEvent`
```javascript
window.addEventListener('storage', function (e) {
    if (e.key === 'ctc-msg') {
        const data = JSON.parse(e.newValue);
        const text = '[receive] ' + data.msg + ' â€”â€” tab ' + data.from;
        console.log('[Storage I] receive message:', text);
    }
});

```


**å…±äº«å­˜å‚¨+è½®è¯¢æ¨¡å¼**

### [shared worker](https://developer.mozilla.org/en-US/docs/Web/API/SharedWorker). æ˜¯ Worker å®¶æ—çš„å¦ä¸€ä¸ªæˆå‘˜ã€‚æ™®é€šçš„ Worker ä¹‹é—´æ˜¯ç‹¬ç«‹è¿è¡Œã€æ•°æ®äº’ä¸ç›¸é€šï¼›è€Œå¤šä¸ª Tab æ³¨å†Œçš„ Shared Worker åˆ™å¯ä»¥å®ç°æ•°æ®å…±äº«ã€‚

Shared Worker åœ¨å®ç°è·¨é¡µé¢é€šä¿¡æ—¶çš„é—®é¢˜åœ¨äºï¼Œå®ƒæ— æ³•ä¸»åŠ¨é€šçŸ¥æ‰€æœ‰é¡µé¢ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨è½®è¯¢çš„æ–¹å¼ï¼Œæ¥æ‹‰å–æœ€æ–°çš„æ•°æ®ã€‚æ€è·¯å¦‚ä¸‹ï¼š
```
// åˆ›å»ºå…±äº«çº¿ç¨‹å¯¹è±¡
let worker = new SharedWorker("./sharedWorker.js");

// æ‰‹åŠ¨å¯åŠ¨ç«¯å£
worker.port.start();

// å¤„ç†ä» worker è¿”å›çš„æ¶ˆæ¯
worker.port.onmessage = function (val) {
...
};

<button id="tab">æ–°å¼€ Tab</button>
<button id="l-btn">ç‚¹èµ</button>
<p><span id="likedCount">è¿˜æ²¡æœ‰äººç‚¹èµ</span></span>ğŸ‘</p>
<script>
 let likedCountEl = document.querySelector("#likedCount");

 let worker = new SharedWorker("./sharedWorker.js");

 console.log('worker.port', worker.port);

 worker.port.start();

 // ç›‘å¬æ¶ˆæ¯
 worker.port.onmessage = function (val) {
 likedCountEl.innerHTML = val.data;
 };

 document.getElementById('tab').onclick = function () {
 // IP åœ°å€ä¸ºæœ¬åœ°èµ·çš„æœåŠ¡
 const windowOpen = window.open('http://127.0.0.1:5500/CrossPageCommunication/sharedWorker/index.html');
 }

 document.getElementById('l-btn').onclick = function () {
 worker.port.postMessage('ç‚¹èµäº†');
 };
</script>
// ./sharedWorker.js
let a = 666;

console.log('shared-worker');
onconnect = function (e) {
 const port = e.ports[0];
 console.log('shared-worker connect');

 // ä¸èƒ½ä½¿ç”¨è¿™ç§æ–¹å¼ç›‘å¬äº‹ä»¶
 // port.addEventListener('message', () => {
 // port.postMessage(++a);
 // });

 port.postMessage(a);

port.onmessage = () =>{
  port.postMessage(++a);
 };
 console.log('å½“å‰ç‚¹èµæ¬¡æ•°:', a);
};
```
- å¦‚æœè¦ä½¿ SharedWorker è¿æ¥åˆ°å¤šä¸ªä¸åŒçš„é¡µé¢ï¼Œè¿™äº›é¡µé¢å¿…é¡»æ˜¯åŒæºçš„ï¼ˆç›¸åŒçš„åè®®ã€host ä»¥åŠç«¯å£ï¼‰ã€‚
- Shared Worker åœ¨å®ç°è·¨é¡µé¢é€šä¿¡æ—¶çš„ï¼Œå®ƒæ— æ³•ä¸»åŠ¨é€šçŸ¥æ‰€æœ‰é¡µé¢ï¼Œéœ€è¦åˆ·æ–°é¡µé¢æˆ–è€…æ˜¯å®šæ—¶ä»»åŠ¡æ¥æ£€æŸ¥æ˜¯å¦æœ‰æ–°çš„æ¶ˆæ¯ã€‚åœ¨ä¾‹å­ä¸­æˆ‘æ˜¯æ‰‹åŠ¨åˆ·æ–°çš„ï¼Œå½“ç„¶å¯ä»¥ä½¿ç”¨ setInterval æ¥å®šæ—¶åˆ·æ–°ã€‚
- å¦‚æœéœ€è¦è°ƒè¯• SharedWorkerï¼Œä½¿ç”¨ chrome://inspect/#workers

:::

## 14. é™¤äº†ç½‘ç»œè¯·æ±‚å’Œå®šæ—¶å™¨ï¼Œè¿˜æœ‰å“ªäº›åœºæ™¯è¦ç”¨åˆ°Promiseï¼Ÿ
- æ£€éªŒè¡¨å•, æ¯ä¸€ä¸ªæ ¡éªŒé¡¹éƒ½æ˜¯ä¸€ä¸ªpromise, ç”¨ promise.all
- é¡ºåºæ‰§è¡Œçš„ä»»åŠ¡, å¦‚è´­ç‰©è½¦çš„éœ€æ±‚, éœ€è¦ä¸‹å•åæ‰èƒ½è¿›è¡Œä»˜æ¬¾, ä»˜æ¬¾åæ‰èƒ½è·³è½¬åˆ°è®¢å•é¡µé¢ç­‰

å¯ä»¥çœ‹åšä¸€ä¸ªçŠ¶æ€æœº, ä»»ä½•å…·æœ‰çŠ¶æ€å’ŒçŠ¶æ€æ”¹å˜çš„ä¸šåŠ¡æµç¨‹éƒ½å¯ä»¥ä½¿ç”¨ Promise å®ç°.


## 15. æ€ä¹ˆè®¾ç½®localstorage è¿‡æœŸæ—¶é—´ è‡ªåŠ¨åˆ é™¤å®ƒ
localstorage é»˜è®¤ä¸ä¼šè¿‡æœŸ, å¯ä»¥é€šè¿‡ setItem è®¾ç½®æ—¶é—´å‚æ•°, å–å‡ºæ¥åè¿›è¡Œæ¯”è¾ƒååˆ¤æ–­æ˜¯å¦éœ€è¦åˆ é™¤

## 16. [v8åƒåœ¾å›æ”¶](https://www.wjygrit.cn/pages/4orgjeo/#%E7%9B%AE%E6%A0%87%E5%92%8C%E6%8A%80%E6%9C%AF)

## 17. [åŒæºå’Œç¼“å­˜](https://www.wjygrit.cn/pages/SKOWKM/#%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5)

## 18. [TCP + url](https://www.wjygrit.cn/pages/kaoenfk/#%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86-%E6%B5%8F%E8%A7%88%E5%99%A8%E7%BB%93%E6%9E%84)

## 19. å‡ ä¸ªå¾ˆå®ç”¨çš„ BOM å±æ€§å¯¹è±¡æ–¹æ³•?
:::details

- (1)location   
  - å¯¹è±¡ location.href-- è¿”å›æˆ–è®¾ç½®å½“å‰æ–‡æ¡£çš„ URL    
  - location.search -- è¿”å› URL ä¸­çš„æŸ¥è¯¢å­—ç¬¦ä¸²éƒ¨åˆ†ã€‚ä¾‹ å¦‚ http://www.dreamdu.com/dreamdu.php?id=5&name=dreamdu è¿”å›åŒ…æ‹¬(?)åé¢çš„å†… å®¹?id=5&name=dreamdu
  - location.hash -- è¿”å› URL#åé¢çš„å†…å®¹ï¼Œå¦‚æœæ²¡æœ‰#ï¼Œè¿”å›ç©º
  - location.host -- è¿”å› URL ä¸­çš„åŸŸåéƒ¨åˆ†ï¼Œä¾‹å¦‚ www.dreamdu.com
  - location.hostname -- è¿”å› URL ä¸­çš„ä¸»åŸŸåéƒ¨åˆ†ï¼Œä¾‹å¦‚ dreamdu.com
  - location.pathname -- è¿”å› URL çš„åŸŸååçš„éƒ¨åˆ†ã€‚ä¾‹å¦‚ http://www.dreamdu.com/xhtml/ è¿” å›/xhtml/
  - location.port -- è¿”å› URL ä¸­çš„ç«¯å£éƒ¨åˆ†ã€‚ä¾‹å¦‚ http://www.dreamdu.com:8080/xhtml/ è¿”å› 8080
  - location.protocol -- è¿”å› URL ä¸­çš„åè®®éƒ¨åˆ†ã€‚ä¾‹å¦‚ http://www.dreamdu.com:8080/xhtml/ è¿” å›(//)å‰é¢çš„å†…å®¹ http:
  - location.assign -- è®¾ç½®å½“å‰æ–‡æ¡£çš„ URL
  - location.replace() -- è®¾ç½®å½“å‰æ–‡æ¡£çš„ URLï¼Œå¹¶ä¸”åœ¨ history å¯¹è±¡çš„åœ°å€åˆ—è¡¨ä¸­ç§»é™¤è¿™ä¸ª URL
  - location.replace(url); location.reload() -- é‡è½½å½“å‰é¡µé¢
    
- (2)history å¯¹è±¡ 
  - history.go() -- å‰è¿›æˆ–åé€€æŒ‡å®šçš„é¡µé¢æ•° history.go(num); 
  - history.back() -- åé€€ä¸€é¡µ history.forward() -- å‰è¿›ä¸€é¡µ 
    
- (3)Navigator å¯¹è±¡ 
  - navigator.userAgent -- è¿”å›ç”¨æˆ·ä»£ç†å¤´çš„å­—ç¬¦ä¸²è¡¨ç¤º(å°±æ˜¯åŒ…æ‹¬æµè§ˆå™¨ç‰ˆæœ¬ä¿¡æ¯ç­‰çš„å­— ç¬¦ä¸²) 
  - navigator.cookieEnabled -- è¿”å›æµè§ˆå™¨æ˜¯å¦æ”¯æŒ(å¯ç”¨)cookie
  
- (4) window å¯¹è±¡
  - moveTo: ç§»åŠ¨åˆ°æ–°ä½ç½®çš„ç»å¯¹åæ ‡ x,y
  - moveBy: ç›¸å¯¹å½“å‰ä½ç½®åœ¨ä¸¤ä¸ªæ–¹å‘ä¸Šç§»åŠ¨çš„åƒç´ 
  - innerWidth  æµè§ˆå™¨çª—å£ä¸­é¡µé¢è§†å£çš„å¤§å° 
  - innerHeight
  - outerWidth
  - outerHeight
  - resizeTo: æ–°çš„é«˜åº¦å’Œå®½åº¦
  - resizeBy: å®½é«˜ç¼©æ”¾å¤šå°‘
  - scrollTo/scrollBy
  - 

```javascript
let pageWidth = window.innerWidth,
    pageHeight = window.innerHeight;
if (typeof pageWidth != 'numbeer') {
    if (document.compatMode = 'CSS1Compat') {
        pageWidth = document.documentElement.clientWidth
        pageHeight = document.documentElement.clientHeight
    } else {
        pageWidth = document.body.clientWidth
        pageHeight = document.body.clientHeight
    }
}

// è¿™é‡Œï¼Œå…ˆå°†pageWidthå’ŒpageHeightçš„å€¼åˆ†åˆ«è®¾ç½®ä¸ºwindow.innerWidthå’Œwindow.innerHeightã€‚
// ç„¶åï¼Œæ£€æŸ¥pageWidthæ˜¯ä¸æ˜¯ä¸€ä¸ªæ•°å€¼ï¼Œå¦‚æœä¸æ˜¯åˆ™é€šè¿‡document.compatModeæ¥æ£€
// æŸ¥é¡µé¢æ˜¯å¦å¤„äºæ ‡å‡†æ¨¡å¼ã€‚å¦‚æœæ˜¯ï¼Œåˆ™ä½¿ç”¨document.documentElement.clientWidthå’Œ
// document.documentElement.clientHeightï¼›å¦åˆ™ï¼Œå°±ä½¿ç”¨document.body.clientWidthå’Œ
// document.body.clientHeightã€‚

```
:::
## 20. [http2.0](https://juejin.cn/post/6844903734670000142)
:::details

http2.0 çš„ç‰¹æ€§å¦‚ä¸‹ï¼š 
- 1ã€å†…å®¹å®‰å…¨ï¼Œåº”ä¸º http2.0 æ˜¯åŸºäº https çš„ï¼Œå¤©ç„¶å…·æœ‰å®‰å…¨ç‰¹æ€§ï¼Œé€šè¿‡ http2.0 çš„ç‰¹æ€§å¯ ä»¥é¿å…å•çº¯ä½¿ç”¨ https çš„æ€§èƒ½ä¸‹é™ 
  
- 2ã€äºŒè¿›åˆ¶æ ¼å¼ï¼Œhttp1.X çš„è§£ææ˜¯åŸºäºæ–‡æœ¬çš„ï¼Œhttp2.0 å°†æ‰€æœ‰çš„ä¼ è¾“ä¿¡æ¯åˆ†å‰²ä¸ºæ›´å°çš„ æ¶ˆæ¯å’Œå¸§ï¼Œå¹¶å¯¹ä»–ä»¬é‡‡ç”¨äºŒè¿›åˆ¶æ ¼å¼ç¼–ç ï¼ŒåŸºäºäºŒè¿›åˆ¶å¯ä»¥è®©åè®®æœ‰æ›´å¤šçš„æ‰©å±•æ€§ï¼Œæ¯” å¦‚å¼•å…¥äº†å¸§æ¥ä¼ è¾“æ•°æ®å’ŒæŒ‡ä»¤ 
  
- 3ã€å¤šè·¯å¤ç”¨ï¼Œè¿™ä¸ªåŠŸèƒ½ç›¸å½“äºæ˜¯é•¿è¿æ¥çš„å¢å¼ºï¼Œæ¯ä¸ª request è¯·æ±‚å¯ä»¥éšæœºçš„æ··æ‚åœ¨ä¸€ èµ·ï¼Œæ¥æ”¶æ–¹å¯ä»¥æ ¹æ® request çš„ id å°† request å†å½’å±åˆ°å„è‡ªä¸åŒçš„æœåŠ¡ç«¯è¯·æ±‚é‡Œé¢ï¼Œå¦å¤– å¤šè·¯å¤ç”¨ä¸­ä¹Ÿæ”¯æŒäº†æµçš„ä¼˜å…ˆçº§ï¼Œå…è®¸å®¢æˆ·ç«¯å‘Šè¯‰æœåŠ¡å™¨é‚£äº›å†…å®¹æ˜¯æ›´ä¼˜å…ˆçº§çš„èµ„æºï¼Œ å¯ä»¥ä¼˜å…ˆä¼ è¾“ã€‚
:::


